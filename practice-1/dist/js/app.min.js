(()=>{"use strict";function e(){!function(e){let t=new Image;t.onload=t.onerror=function(){!function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)}(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}()}e(),document.addEventListener("DOMContentLoaded",(function(){const t=document.getElementById("partner-form");t.addEventListener("submit",(async function(e){e.preventDefault();let r=function(e){let t=0,n=document.querySelectorAll("._required");for(let e=0;e<n.length;e++){const o=n[e];c(o),o.classList.contains("_email")?i(o)&&(l(o),t++):o.classList.contains("_tel")?s(o)&&(l(o),t++):""===o.value&&(l(o),t++)}return t}(),a=new FormData(t);function l(e){e.parentElement.classList.add("_error")}function c(e){e.parentElement.classList.remove("_error")}function i(e){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)}function s(e){return!/^((\+7|7|8)+([0-9]){10})$/.test(e.value)}a.append("image",n.files[0]),0===r?(console.log(a),alert("Форма успешно отпрвлена"),o.style.backgroundImage=func.isWebp()?'url("../img/avatar.webp")':'url("../img/avatar.png")',t.reset()):alert("Заполните обязательные поля")}));const n=document.getElementById("logo"),o=document.querySelector(".partner-form__photo");document.querySelector(".partner-form__icon-close").addEventListener("click",(()=>{n.value="",o.style.backgroundImage=e()?'url("../img/avatar.webp")':'url("../img/avatar.png")'})),n.addEventListener("change",(()=>{!function(e){if(!["image/jpeg","image/png"].includes(e.type))return alert("Разрешены только изображения в форматах jpeg и png"),void(n.value="");let t=new FileReader;t.onload=function(e){o.style.backgroundImage=`url(${e.target.result})`},t.onerror=function(e){alert("Ошибка")},t.readAsDataURL(e)}(n.files[0])}));const r=document.querySelector(".open-popup"),a=document.querySelector(".partner-form__cancel");r.addEventListener("click",(()=>{t.style.display="block",r.style.display="none",document.body.style.backgroundColor="rgba(0, 0, 0, 0.42)"})),a.addEventListener("click",(()=>{t.style.display="none",r.style.display="block",document.body.style.backgroundColor="transparent"}))}))})();