(()=>{"use strict";!function(e){let t=new Image;t.onload=t.onerror=function(){!function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)}(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}(),document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("partner-form");e.addEventListener("submit",(async function(o){o.preventDefault();let r=function(e){let t=0,n=document.querySelectorAll("._required");for(let e=0;e<n.length;e++){const o=n[e];c(o),o.classList.contains("_email")?s(o)&&(l(o),t++):o.classList.contains("_tel")?i(o)&&(l(o),t++):""===o.value&&(l(o),t++)}return t}(),a=new FormData(e);function l(e){e.parentElement.classList.add("_error")}function c(e){e.parentElement.classList.remove("_error")}function s(e){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)}function i(e){return!/^((\+7|7|8)+([0-9]){10})$/.test(e.value)}a.append("image",t.files[0]),0===r?(console.log(a),alert("Форма успешно отпрвлена"),n.style.backgroundImage=document.documentElement.classList.contains("webp")?'url("../img/avatar.webp")':'url("../img/avatar.png")',e.reset()):alert("Заполните обязательные поля")}));const t=document.getElementById("logo"),n=document.querySelector(".partner-form__photo");document.querySelector(".partner-form__icon-close").addEventListener("click",(()=>{t.value="",n.style.backgroundImage=document.documentElement.classList.contains("webp")?'url("../img/avatar.webp")':'url("../img/avatar.png")'})),t.addEventListener("change",(()=>{!function(e){if(!["image/jpeg","image/png"].includes(e.type))return alert("Разрешены только изображения в форматах jpeg и png"),void(t.value="");let o=new FileReader;o.onload=function(e){n.style.backgroundImage=`url(${e.target.result})`},o.onerror=function(e){alert("Ошибка")},o.readAsDataURL(e)}(t.files[0])}));const o=document.querySelector(".open-popup"),r=document.querySelector(".partner-form__cancel");o.addEventListener("click",(()=>{e.style.display="block",o.style.display="none",document.body.style.backgroundColor="rgba(0, 0, 0, 0.42)"})),r.addEventListener("click",(()=>{e.style.display="none",o.style.display="block",document.body.style.backgroundColor="transparent"}))}))})();